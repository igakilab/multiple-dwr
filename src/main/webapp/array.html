<!DOCTYPE html>
<html>

<head>
  <meta http-equiv="content-language" content="ja">
  <meta charset="UTF-8">
  <script type="text/javascript" src="dwr/engine.js"></script>
  <script type="text/javascript" src="dwr/util.js"></script>
  <script type="text/javascript" src="js/jquery-3.4.1.slim.min.js"></script>
  <script type="text/javascript" src="js/jquery.serialize.js"></script>
  <script type="text/javascript" src="dwr/interface/ProductPrinter.js"></script>
  <script type="text/javascript">
    function update() {
      ProductPrinter.execute({
        callback: function (data) {
          $('#error_message').text("");
          console.log(data);
          var food_text = "";
          data.forEach(function (food) {
            food_text = food_text + "[name]" + food.name + "[price]" + food.price + "<br/>";
          });
          $('#pprinterReply').html(food_text);
        },
        errorHandler: updateErrorMessage
      });
    }
    function updateErrorMessage(message, exception) {
      $('#error_message').text(message);
      $('#pprinterReply').text("");
    }
  </script>
</head>

<body>
  <p>
    <form id="pprinter_form">
      <input value="Send" type="button" onclick="update()" />
    </form>
  </p>
  <p>
    Reply: <span id="pprinterReply"></span>
  </p>
  <p>
    <span id="error_message" class="error"></span>
  </p>
</body>

</html>
